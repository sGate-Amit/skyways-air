<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Skyways Shipment Tracking</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f5f5f5;
      padding: 40px;
      margin: 0;
    }

    .container {
      max-width: 1000px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .mode-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
    }

    .mode-toggle input[type="radio"] {
      appearance: none;
      border: 2px solid #ccc;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      cursor: pointer;
      margin-right: 8px;
    }

    .mode-toggle input[type="radio"]:checked {
      border: 6px solid #4CAF50;
    }

    .mode-toggle label {
      font-size: 18px;
      display: flex;
      align-items: center;
    }

    .form-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }

    select, input[type="text"] {
      padding: 10px;
      font-size: 16px;
      min-width: 200px;
      flex: 1;
    }

    .hidden {
      display: none;
    }

    .iframe-wrapper {
      width: 100%;
      height: 400px;
      background: #eee;
      border-radius: 6px;
      overflow: hidden;
      margin-top: 20px;
      display: none;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .btn {
      background: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      font-size: 16px;
      cursor: pointer;
      margin: 0 auto;
      display: block;
      border-radius: 5px;
    }

    .error-message {
      color: red;
      text-align: center;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Track your shipment</h1>

    <!-- Mode Toggle -->
    <div class="mode-toggle">
      <label><input type="radio" name="mode" value="air" checked onchange="toggleFields()"> Air</label>
      <label><input type="radio" name="mode" value="ocean" onchange="toggleFields()"> Ocean</label>
    </div>

    <!-- Air Fields -->
    <div class="form-row" id="airFields">
      <select id="airline">
         <option value="">Select Airline</option>
  <option value="555">Aeroflot</option>
  <option value="514">Air Arabia</option>
  <option value="807">Air Asia</option>
  <option value="014">Air Canada</option>
  <option value="996">Air Europa</option>
  <option value="057">Air France</option>
  <option value="098">Air India</option>
  <option value="XXX">Akasa Air</option>
  <option value="055">Alitalia (ITA Airways)</option>
  <option value="205">All Nippon Airways</option>
  <option value="001">American Airlines</option>
  <option value="125">British Airways</option>
  <option value="160">Cathay Pacific Airways</option>
  <option value="077">EgyptAir</option>
  <option value="176">Emirates SkyCargo</option>
  <option value="071">Ethiopian Airlines</option>
  <option value="607">Etihad Cargo</option>
  <option value="615">European Air Transport</option>
  <option value="954">GoFirst</option>
  <option value="312">Indigo</option>
  <option value="131">Japan Airlines</option>
  <option value="074">KLM Royal Dutch Airlines</option>
  <option value="229">Kuwait Airways</option>
  <option value="080">LOT Polish Airlines</option>
  <option value="020">Lufthansa</option>
  <option value="232">Malaysian Airlines</option>
  <option value="445">Neos</option>
  <option value="910">Oman Air</option>
  <option value="624">Pegasus</option>
  <option value="157">Qatar Airways</option>
  <option value="065">Saudi Arabian Airlines</option>
  <option value="618">Singapore Airlines</option>
  <option value="775">SpiceJet</option>
  <option value="603">Srilankan Airlines</option>
  <option value="724">Swiss World Cargo</option>
  <option value="217">Thai Airways</option>
  <option value="235">Turkish</option>
  <option value="016">United Airlines</option>
  <option value="932">Virgin Atlantic</option>
  <option value="228">Vistara (Tata SIA Airlines)</option>
  <option value="457">Airasia India</option>
  <option value="843">Air Asia X</option>
      </select>
      <input type="text" id="awbNumber" maxlength="8" placeholder="Enter 8-digit AWB number">
    </div>

    <!-- Ocean Fields -->
    <div class="form-row hidden" id="oceanFields">
      <select id="trackingType">
        <option value="">Select Tracking Type</option>
        <option value="BK">Booking Number</option>
        <option value="BL">Bill of Lading</option>
        <option value="CT">Container</option>
      </select>
      <select id="shippingLine">
       
        <option value="ZIMU">Zim Integrated Shipping Services</option>
        <option value="YMLU">Yang Ming Marine Transport Corporation</option>
        <option value="INTL">Interasia Lines</option>
        <option value="PACU">Pacific International Lines (PIL)</option>
        <option value="MAEU">Maersk Line</option>
        <option value="HLCU">Hapag Lloyd Container Line</option>
        <option value="EGLV">Evergreen Marine Corporation</option>
        <option value="COSU">COSCO Shipping Lines</option>
        <option value="HDMU">Hyundai Merchant Marine Co., Ltd.</option>
        <option value="KMTU">Korea Marine Transport (KMTC)</option>
        <option value="ONEY">Ocean Network Express</option>
        <option value="CMDU">Compagnie Maritime d'Affretement Compagnie Generale Maritime</option>
        <option value="MSCU">Mediterranean Shipping Company</option>
      </select>
      <input type="text" id="oceanTracking" placeholder="Enter Tracking Number">
    </div>

    <!-- Submit Button -->
    <button class="btn" onclick="submitTracking()">Track Shipment</button>

    <!-- Error Message -->
    <div id="errorMsg" class="error-message"></div>

    <!-- Iframe Preview -->
    <div class="iframe-wrapper" id="iframeWrapper">
      <iframe id="trackingIframe" src=""></iframe>
    </div>
  </div>
<script>
    window.toggleFields = function () {
      const mode = document.querySelector('input[name="mode"]:checked').value;
      document.getElementById("airFields").classList.toggle("hidden", mode !== "air");
      document.getElementById("oceanFields").classList.toggle("hidden", mode !== "ocean");
      document.getElementById("iframeWrapper").style.display = "none";
    };
  
    window.submitTracking = async function () {
      const mode = document.querySelector('input[name="mode"]:checked').value;
      const iframe = document.getElementById("trackingIframe");
      const wrapper = document.getElementById("iframeWrapper");
  
      // Reset state
      iframe.src = "";
      iframe.removeAttribute("srcdoc");
      wrapper.style.display = "none";
  
      const username = "kashish259261@gmail.com";
      const password = "Kashish@1234";
      let payload = { username, password, mode };
  
      if (mode === "air") {
        const airlineCode = document.getElementById("airline").value;
        const trackingNumber = document.getElementById("awbNumber").value.trim();
  
        if (!airlineCode || !trackingNumber) {
          showError("Select airline and enter AWB number.");
          return;
        }
  
        if (!/^\d+$/.test(trackingNumber)) {
          showError("AWB number must contain digits only.");
          return;
        }
  
        payload.trackingNumber = `${airlineCode}-${trackingNumber}`;
      } else {
        const shippingLineCode = document.getElementById("shippingLine").value;
        const trackingType = document.getElementById("trackingType").value;
        const trackingNumber = document.getElementById("oceanTracking").value.trim();
  
        if (!shippingLineCode || !trackingType || !trackingNumber) {
          showError("Fill all ocean tracking fields.");
          return;
        }
          const formattedTracking = `${trackingType}${trackingNumber}-${shippingLineCode}`;
        
        payload = {
          username,
          password,
          mode,
          trackingNumber: formattedTracking
        };

      }
  
      try {
      const res = await fetch("https://utils.sgate.net/api/v1/tracking", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });
  
        const data = await res.json();
     // alert("API Response:\n" + JSON.stringify(data, null, 2));
  
        if (data.success && data.data?.trackingUrl) {
          iframe.src = data.data.trackingUrl;
          wrapper.style.display = "block";
        } else {
          iframe.srcdoc = `<div style="display:flex;justify-content:center;align-items:center;height:100%;font-family:sans-serif;color:red;text-align:center;padding:20px;">
            ${data.error || data.message || "Tracking failed."}
          </div>`;
          wrapper.style.display = "block";
        }
  
      } catch (e) {
        iframe.srcdoc = `<div style="display:flex;justify-content:center;align-items:center;height:100%;font-family:sans-serif;color:red;text-align:center;padding:20px;">
          Network or server error. Please try again later.
        </div>`;
        wrapper.style.display = "block";
        console.error("API fetch failed:", e);
      }
    };
  
    function showError(msg) {
      const iframe = document.getElementById("trackingIframe");
      const wrapper = document.getElementById("iframeWrapper");
  
      iframe.srcdoc = `<div style="display:flex;justify-content:center;align-items:center;height:100%;font-family:sans-serif;color:red;text-align:center;padding:20px;">
        ${msg}
      </div>`;
      wrapper.style.display = "block";
    }
  </script>

</body>
</html>

  

